var __reflect=this&&this.__reflect||function(t,i,e){t.__class__=i,e?e.push(i):e=[i],t.__types__=t.__types__?e.concat(t.__types__):e},__extends=this&&this.__extends||function(t,i){function e(){this.constructor=t}for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);e.prototype=i.prototype,t.prototype=new e},__awaiter=this&&this.__awaiter||function(t,i,e,n){return new(e||(e=Promise))(function(a,o){function s(t){try{h(n.next(t))}catch(i){o(i)}}function r(t){try{h(n["throw"](t))}catch(i){o(i)}}function h(t){t.done?a(t.value):new e(function(i){i(t.value)}).then(s,r)}h((n=n.apply(t,i||[])).next())})},__generator=this&&this.__generator||function(t,i){function e(t){return function(i){return n([t,i])}}function n(e){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,o&&(s=o[2&e[0]?"return":e[0]?"throw":"next"])&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[0,s.value]),e[0]){case 0:case 1:s=e;break;case 4:return h.label++,{value:e[1],done:!1};case 5:h.label++,o=e[1],e=[0];continue;case 7:e=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===e[0]||2===e[0])){h=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){h.label=e[1];break}if(6===e[0]&&h.label<s[1]){h.label=s[1],s=e;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(e);break}s[2]&&h.ops.pop(),h.trys.pop();continue}e=i.call(t,h)}catch(n){e=[6,n],o=0}finally{a=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}var a,o,s,r,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:e(0),"throw":e(1),"return":e(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},mokuai;!function(t){var i;!function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(i=t.ConstraintDirect||(t.ConstraintDirect={}));var e;!function(t){t[t.NANO=0]="NANO",t[t.SIMPLE=1]="SIMPLE",t[t.FF=2]="FF",t[t.NN=3]="NN"}(e=t.BODY_SHAPE_TYPE||(t.BODY_SHAPE_TYPE={}));var n;!function(t){t[t.HE_XIN=0]="HE_XIN",t[t.ZHUANG_JIA=1]="ZHUANG_JIA",t[t.WU_QI=2]="WU_QI",t[t.CAN_HAI=3]="CAN_HAI"}(n=t.MO_KUAI_TYPE||(t.MO_KUAI_TYPE={})),t.SIMPLE_SIZE=16,t.FF_SIZE=32,t.NN_SIZE=48,t.NANO_SIZE_PH=.16,t.SIMPLE_SIZE_PH=.32,t.FF_SIZE_PH=.64,t.NN_SIZE_PH=.96,t.M_SIZE=[t.SIMPLE_SIZE,t.FF_SIZE,t.NN_SIZE],t.M_SIZE_PH=[t.NANO_SIZE_PH,t.SIMPLE_SIZE_PH,t.FF_SIZE_PH,t.NN_SIZE_PH];var a=function(t){function i(i,e,n,a){var o=t.call(this,RES.getRes(n))||this;return o.mark_number=-1,o.rm_herd=!1,o.mk_level=1,o.dk_now=1,o.relativeDistance=egret.Point.create(0,0),o.is_diao_luo=!1,o.shapeType=e,o.moKuaiPost=i,o.fc=a,o.bitName=n,o.initAnch(),o}return __extends(i,t),i.prototype.initAnch=function(){this.anchorOffsetX=.5*this.width,this.anchorOffsetY=.5*this.height},i.prototype.UpdataPosition=function(t){this.x=t.x+this.relativeDistance.x,this.y=t.y+this.relativeDistance.y},i.prototype.updata=function(){},i.prototype.coll=function(t){return this.dk_now=this.dk_now-t,this.dk_now<=0&&(this.mk_level--,this.mk_level>0&&(4==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_level_4_png"),this.bitName="op_zj_pt_level_4_png"),3==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_level_3_png"),this.bitName="op_zj_pt_level_3_png"),2==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_level_2_png"),this.bitName="op_zj_pt_level_2_png"),1==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_level_1_png"),this.bitName="op_zj_pt_level_1_png")),this.dk_now=this.mk_level),this.mk_level<=0&&this.dk_now<=0?!0:!1},i.prototype.setMkLevel=function(t){this.mk_level=t,this.dk_now=t},i.prototype.dell=function(t){t.parent&&this.fc.battle_scene.removeChild(t),t=null},i.prototype.jihui_texiao=function(){var t=new egret.Bitmap(RES.getRes(this.bitName));t.x=this.x,t.y=this.y,this.fc.battle_scene.addChild(t),t.rotation=this.rotation,t.anchorOffsetX=.5*t.width,t.anchorOffsetY=.5*t.height;var i=t.rotation+361;egret.Tween.get(t).to({alpha:.9,rotation:i},800).call(this.dell,this,[t])},i.prototype.jiZhong_texiao=function(){5==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_jz_level_5_jz_png")),4==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_jz_level_4_jz_png")),3==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_jz_level_3_jz_png")),2==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_jz_level_2_jz_png")),1==this.mk_level&&(this.texture=RES.getRes("op_zj_pt_jz_level_1_jz_png")),this.alpha=.5,egret.Tween.get(this).to({alpha:1},250).to({alpha:.3},250).call(this.shan_shuo,this)},i.prototype.shan_shuo=function(){this.alpha=1,this.texture=RES.getRes(this.bitName)},i}(egret.Bitmap);t.MoKuaiBase=a,__reflect(a.prototype,"mokuai.MoKuaiBase")}(mokuai||(mokuai={}));var wuqi;!function(t){var i;!function(t){t[t.PU_TONG=0]="PU_TONG",t[t.ZHI_SHE=1]="ZHI_SHE",t[t.JI_GUANG=2]="JI_GUANG",t[t.DAO_DAN=3]="DAO_DAN",t[t.DA_PAO=4]="DA_PAO",t[t.ZHI_DAO_JI_GUANG=5]="ZHI_DAO_JI_GUANG",t[t.CHUAN_JIA_DAN=6]="CHUAN_JIA_DAN",t[t.YUN_BAO_DAN=7]="YUN_BAO_DAN",t[t.DING_WEI=8]="DING_WEI",t[t.JIAN_SU=9]="JIAN_SU",t[t.KAI_HUA=10]="KAI_HUA",t[t.GEN_ZHONG=11]="GEN_ZHONG",t[t.SAN_DAN=12]="SAN_DAN",t[t.SHE_XIAN=13]="SHE_XIAN",t[t.DING_XIANG=14]="DING_XIANG",t[t.YU_LEI=15]="YU_LEI",t[t.LUO_XUAN=16]="LUO_XUAN",t[t.CHANG_DING=17]="CHANG_DING",t[t.ZHONG_CHUI=18]="ZHONG_CHUI"}(i=t.WUQI_TYPE||(t.WUQI_TYPE={}));var e=function(e){function n(t,i,n,a,o){var s=e.call(this,t,i,n,o)||this;return s.cd=2e3,s.mark_time=0,s.sudu=5,s.level=1,s.moKuaiType=mokuai.MO_KUAI_TYPE.WU_QI,s.wuqi_type=a,s}return __extends(n,e),n.prototype.updata_wq=function(t,i,e){return this.updata(),e-this.mark_time>this.cd?(this.mark_time=e,void this.fashe(t,i,e)):void 0},n.prototype.updata=function(){},n.prototype.fashe=function(t,i,e){},n.prototype.diu=function(e,n,a,o){var s;e==i.ZHI_SHE&&(s=new zidan.ZhiSheZhiDan(this.fc.battle_scene,a,.001)),e==i.DING_WEI&&(s=new zidan.DingWeiZidan(this.fc.battle_scene,a,1e-4)),e==i.JIAN_SU&&(s=new zidan.JianSuZiDan(this.fc.battle_scene,a,1e-4)),e==i.KAI_HUA&&(s=new zidan.KaiHuaZiDan(this.fc.battle_scene,a,1e-4)),e==i.GEN_ZHONG&&(s=new zidan.GenZongZiDan(this.fc.battle_scene,a,1e-4,this.fc.battle_scene.sk)),e==t.WUQI_TYPE.SAN_DAN&&(s=new zidan.SanDanZiDan(this.fc.battle_scene,a,1e-4)),e==t.WUQI_TYPE.DAO_DAN&&(s=new zidan.DaoDanZiDan(this.fc.battle_scene,a,1e-4,this.tiaget_fc)),e==t.WUQI_TYPE.DING_XIANG&&(s=new zidan.DingXiangZiDan(this.fc.battle_scene,a,1e-4)),e==t.WUQI_TYPE.YU_LEI&&(s=new zidan.YuLeiZiDan(this.fc.battle_scene,a,1e-4)),e==t.WUQI_TYPE.LUO_XUAN&&(s=new zidan.LuoXuanZiDan(this.fc.battle_scene,a,1e-4)),e==t.WUQI_TYPE.CHANG_DING&&(s=new zidan.ChangDingZiDan(this.fc.battle_scene,a,1e-4,this.level)),s.angle=o,this.fc.battle_scene.world.addBody(s),this.fc.battle_scene.addChild(s.bitmap);var r=Tools.egretTOp2(egret.Point.create(this.x,this.y));s.position[0]=r.x,s.position[1]=r.y,s.velocity=[n.x,n.y],s.yue_shu()},n}(mokuai.MoKuaiBase);t.WuQiBase=e,__reflect(e.prototype,"wuqi.WuQiBase")}(wuqi||(wuqi={}));var zhuangtaiji;!function(t){var i;!function(t){t[t.SINGO_MOVE_ING=0]="SINGO_MOVE_ING",t[t.SINGO_MOVE_OVER=1]="SINGO_MOVE_OVER",t[t.ZUO_YOU_MOVE=2]="ZUO_YOU_MOVE",t[t.MOVE_OVER=3]="MOVE_OVER",t[t.NULL_T=4]="NULL_T"}(i=t.ZT_TYPE||(t.ZT_TYPE={}));var e=function(){function t(){}return t.prototype.upStep=function(t){},t}();t.ZhuangTaiJiBase=e,__reflect(e.prototype,"zhuangtaiji.ZhuangTaiJiBase")}(zhuangtaiji||(zhuangtaiji={}));var scene;!function(t){t.battle_sceneW=4e3,t.battle_sceneH=4e3,t.scene_anch_x=1e3,t.scene_anch_y=1e3,t.scene_wy_limit=200,t.scene_wy_bfb=.2,t.p2_zuo=10,t.p2_shang=60,t.p2_you=45,t.p2_xia=37;var i=function(i){function e(){var t=i.call(this)||this;return t.p2_wy_x=0,t.p2_wy_y=0,t.nowBo=0,t.nowHeiHe=0,t.allHeiHe=0,t.lastFeiJi=0,t.add_hh_fc=!0,t._distance=new egret.Point,t._skP=new egret.Point,t.init(),t.initcoll(),t}return __extends(e,i),e.prototype.init=function(){this.width=t.battle_sceneW,this.height=t.battle_sceneH,this.world=new p2.World,this.world.gravity=[0,0],this.addShuKeListener(),this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),this.dijis=new Array,this.removeZiDanBodyList=new Array,this.ovzRemoveZiDanBodyList=new Array,this.shouShangFeiChuanList=new Array,this.canHais=new Array,this.zidanList=new Array,this.removeDLList=new Array},e.prototype.initcoll=function(){var t=this;this.world.on("beginContact",function(i){if(i.bodyA instanceof diaoluo.DiaoLuo){var e=i.bodyA;i.bodyB;e.collNum--,0==e.collNum&&t.removeDLList.push(e)}if(i.bodyB instanceof diaoluo.DiaoLuo){var e=i.bodyB;i.bodyA;e.collNum--,0==e.collNum&&t.removeDLList.push(e)}if(i.bodyB instanceof zidan.ZiDanBase||i.bodyA instanceof zidan.ZiDanBase){var n=i.bodyB instanceof zidan.ZiDanBase?i.bodyB:i.bodyA,a=n;a.collNumber--}if(i.bodyB instanceof feichuan.FeiChuanBase||i.bodyA instanceof feichuan.FeiChuanBase){var n=i.bodyB instanceof feichuan.FeiChuanBase?i.bodyB:i.bodyA,o=i.bodyB instanceof feichuan.FeiChuanBase?i.bodyA:i.bodyB,s=o,r=n;if((r.zhenying==GameConstant.ZHEN_YING.DI_JUN||r.zhenying==GameConstant.ZHEN_YING.ZHONG_LI)&&o instanceof zidan.ZiDanBase&&s.is_first){var h=r.jia_ce_peng_zhuang_dian(o.displays[0].x,o.displays[0].y);if(r.shang_hai(h,s.hitNumber),s instanceof zidan.ChangDingZiDan){var _=s;_.chuan_jia(h,r)}s.is_first=!1}0==s.collNumber&&t.removeZiDanBodyList.push(s)}})},e.prototype.onEnterFrame=function(){this.chackColl(),this.chackFeiChuan(),this.p2Updata(),this.upSomeThing(),this.updataIsInWorld(),this.updataWuQi()},e.prototype.updataZidan=function(){for(var t=0,i=this.zidanList;t<i.length;t++){var e=i[t];e.is_updata&&e.updata()}},e.prototype.updataWuQi=function(){for(var t=egret.getTimer(),i=0,e=this.dijis;i<e.length;i++)for(var n=e[i],a=0,o=0,s=n.wuqiList;o<s.length;o++){var r=s[o];r&&(a++,r.updata_wq(n.angle,this.sk,t))}},e.prototype.updataIsInWorld=function(){for(var t=0,i=this.canHais;t<i.length;t++){var e=i[t];e.position[1]<30&&this.removeTheFcInTheGame(e)}},e.prototype.upSomeThing=function(){},e.prototype.chackColl=function(){for(var t=this.removeZiDanBodyList.length,i=0;t>i;i++){var e=this.removeZiDanBodyList.pop();if(e){var n=e;if(n.collNumber<=0){var a=n.displays[0];a&&a.parent&&n.texiao(),n.removeYueShu(),this.world.removeBody(n),n=null}}}t=this.ovzRemoveZiDanBodyList.length;for(var i=0;t>i;i++){var e=this.ovzRemoveZiDanBodyList.pop();if(e){var n=e,a=n.displays[0];a&&a.parent&&this.removeChild(a),n.removeYueShu(),this.world.removeBody(n),n=null}}t=this.removeDLList.length;for(var i=0;t>i;i++){var o=this.removeDLList.pop();if(o){this.sk.addMoKuai(o);var a=o.displays[0];a&&a.parent&&this.removeChild(a),this.world.removeBody(o),o=null}}},e.prototype.chackFeiChuan=function(){for(var t=0;t<this.shouShangFeiChuanList.length;t++){for(var i=this.shouShangFeiChuanList.pop(),e=0;e<i.removeMoKuai.length;e++){var n=i.removeMoKuai.pop();i.removeShape(n.boxShape),this.removeChild(n),i.mokuai_size--,n.is_diao_luo&&this.diao_luo_dao_ju(n)}if(!GameConstant.chackMoKuaiNumber(i))return;GameConstant.diaoluo(i),i&&i.mokuai_size>0&&i.fenJie()}},e.prototype.p2Updata=function(){this.updataSKNow(),this.world.step(.06);for(var i=this.world.bodies.length,e=0;i>e;e++){var n=this.world.bodies[e];if(!this.sk_p2_now||n instanceof shuke.ShuKe||(n.position[0]=n.position[0]+this.sk_p2_now.x,n.position[1]=n.position[1]+this.sk_p2_now.y),n instanceof shuke.ShuKe)for(var a=n,o=0,s=a.wuqiList;o<s.length;o++){var r=s[o];r.updata_wq(n.angle,this.sk,egret.getTimer())}if(n instanceof diaoluo.DiaoLuo){var h=n;h.updata()}if(n instanceof zidan.ZiDanBase){var _=n;_.is_updata&&_.updata(),_.position[1]>t.p2_shang&&this.ovzRemoveZiDanBodyList.push(_),_.position[1]<t.p2_xia&&this.ovzRemoveZiDanBodyList.push(_),_.position[0]>t.p2_you&&this.ovzRemoveZiDanBodyList.push(_),_.position[0]<t.p2_zuo&&this.ovzRemoveZiDanBodyList.push(_),egret.getTimer()-_.mark_time>_.sheng_ming_zhou_qi&&(_.isAddRem||(_.isAddRem=!0,_.removeTeXiao())),0==_.velocity[0]&&0==_.velocity[1]}if(n instanceof canhai.CanHai,n instanceof shuke.ShuKe&&(n.velocity=[0,0]),n instanceof feichuan.FeiChuanBase){var u=n;u.updataSomeThing()}else{var c=n.displays[0];if(c){var p=Tools.p2TOegretPoitn(egret.Point.create(n.position[0],n.position[1]));c.x=p.x,c.y=p.y,c.rotation=360-180*n.angle/Math.PI}}}this.updataSKBefor()},e.prototype.updataSKBefor=function(){return this.sk_p2_befor?(this.sk_p2_befor.x=this.sk.position[0],void(this.sk_p2_befor.y=this.sk.position[1])):void(this.sk_p2_befor=egret.Point.create(this.sk.position[0],this.sk.position[1]))},e.prototype.updataSKNow=function(){this.sk_p2_befor&&(this.sk_p2_now||(this.sk_p2_now=egret.Point.create(0,0)),this.sk_p2_now.x=.1*(this.sk_p2_befor.x-this.sk.position[0]),this.sk_p2_now.y=.1*(this.sk_p2_befor.y-this.sk.position[1]))},e.prototype.diao_luo_dao_ju=function(t){var i=new diaoluo.DiaoLuo(this,t.diao_luo_type,t.dl_lv,Tools.egretTOp2(egret.Point.create(t.x,t.y)),t.dl_wq_type);this.world.addBody(i),this.addChild(i.displays[0]),i.loop()},e.prototype.addShuKeListener=function(){this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.mouseDown,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.mouseUp,this)},e.prototype.mouseUp=function(t){this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},e.prototype.mouseDown=function(t){this._distance.x=t.stageX,this._distance.y=t.stageY,this._skP.x=this.sk.position[0],this._skP.y=this.sk.position[1],this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.mouseMove,this)},e.prototype.mouseMove=function(t){var i=egret.Point.create((t.stageX-this._distance.x)/Physics.factor,-(t.stageY-this._distance.y)/Physics.factor);this.sk.position[0]=this._skP.x+i.x,this.sk.position[1]=this._skP.y+i.y},e.prototype.weiyi=function(i){var e=(t.scene_anch_x-t.scene_wy_limit,t.scene_anch_y-t.scene_wy_limit,t.scene_anch_x+t.scene_wy_limit+this.stage.stageWidth),n=(t.scene_anch_y+t.scene_wy_limit+this.stage.stageHeight,.5*this.stage.stageWidth),a=.5*this.stage.stageHeight,o=t.scene_anch_x+n,s=(t.scene_anch_y+a,0);i.x<o&&(s=this.x+(o-i.x),s=s>e?e:s,this.x=s),i.x>t.scene_anch_x+n},e.prototype.removeTheFcInTheGame=function(t){if(t.fc_type==feichuan.FC_TYPE.DIJI){var i=this.dijis.indexOf(t);this.dijis.splice(i)}if(t.fc_type==feichuan.FC_TYPE.CANHAI){var i=this.canHais.indexOf(t);this.canHais.splice(i)}var e=t.moKuaiList.length;this.world.removeBody(t);for(var n=0;e>n;n++)for(var a=t.moKuaiList[n].length,o=0;a>o;o++)t.moKuaiList[n][o]&&this.removeChild(t.moKuaiList[n][o]),t.moKuaiList[n][o]=null;t=null},e}(egret.DisplayObjectContainer);t.SceneBase=i,__reflect(i.prototype,"scene.SceneBase")}(scene||(scene={}));var zhuangjia;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,n,a)||this;return o.moKuaiType=mokuai.MO_KUAI_TYPE.ZHUANG_JIA,o}return __extends(i,t),i}(mokuai.MoKuaiBase);t.ZhuangJiaBase=i,__reflect(i.prototype,"zhuangjia.ZhuangJiaBase")}(zhuangjia||(zhuangjia={}));var ai;!function(t){var i;!function(t){t[t.xuan_zhuan=0]="xuan_zhuan",t[t.miao_zhun=1]="miao_zhun"}(i=t.AI_TYPE||(t.AI_TYPE={}));var e;!function(t){t[t.ZS=0]="ZS",t[t.ZX=1]="ZX",t[t.YS=2]="YS",t[t.YX=3]="YX"}(e=t.WEI_ZHI||(t.WEI_ZHI={}));var n;!function(t){t[t.Clockwise=0]="Clockwise",t[t.Anti_clockwise=1]="Anti_clockwise"}(n=t.ZHUAN_XIANG||(t.ZHUAN_XIANG={}));var a=function(){function t(t){this.hang_up=!1,this.jian_ge=500,this.mark_time=0,this.fc=t,this.sceneConsole=t.battle_scene,this.suke=this.sceneConsole.sk}return t.prototype.updata_ai=function(t){t-this.mark_time>this.jian_ge&&(this.mark_time=t,this.doUpData(t))},t.prototype.doUpData=function(t){},t}();t.AiBase=a,__reflect(a.prototype,"ai.AiBase")}(ai||(ai={}));var texiao;!function(t){var i=function(){function t(t){this.bit=new egret.Bitmap(RES.getRes(t))}return t.prototype["goto"]=function(){},t}();t.TeXiaoBase=i,__reflect(i.prototype,"texiao.TeXiaoBase")}(texiao||(texiao={}));var feichuan;!function(t){var i;!function(t){t[t.SUKE=0]="SUKE",t[t.DIJI=1]="DIJI",t[t.CANHAI=2]="CANHAI"}(i=t.FC_TYPE||(t.FC_TYPE={}));var e=function(t){function i(i,e,n){var a=t.call(this,{mass:1})||this;return a.mokuai_size=0,a.heXinList=new Array,a.zhuangJaList=new Array,a.ais=new Array,a.egretWorldPoint=e,a.battle_scene=i,a.zhenying=n,a.initPhPost(),a.initColl(),a.ztj=new fjztj.XBZhuangtaiji(a),a}return __extends(i,t),i.prototype.initJson=function(t){var i=RES.getRes(t);this.W=i.layers[0].width,this.H=i.layers[0].height,this.initList(this.H,this.W);var e=i.layers[0].data;this.moKuaiList=new Array(this.H);for(var n=0,a=0;a<this.H;a++){this.moKuaiList[a]=new Array(this.W);for(var o=0;o<this.W;o++)if(0!=e[n]){var s=i.tiles[e[n]-1].image.replace(".","_"),r=void 0;("op_hx_hx_png"==s||"op_hx_ss_png"==s||"op_hx_zj_png"==s)&&(this.hx=new mokuai.DongLiHeXin(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),r=this.hx),"op_zj_pt_level_5_png"==s&&(r=new zhuangjia.PuTongZhuangJia(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),r.setMkLevel(5)),"op_zj_pt_level_4_png"==s&&(r=new zhuangjia.PuTongZhuangJia(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),r.setMkLevel(4)),"op_zj_pt_level_3_png"==s&&(r=new zhuangjia.PuTongZhuangJia(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),r.setMkLevel(3)),"op_zj_pt_level_2_png"==s&&(r=new zhuangjia.PuTongZhuangJia(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),r.setMkLevel(2)),"op_zj_pt_level_1_png"==s&&(r=new zhuangjia.PuTongZhuangJia(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),r.setMkLevel(1)),"op_wq_1_png"==s&&(r=new djwq.ZhiSheWuQi(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),this.wuqiList.push(r)),"op_wq_2_png"==s&&(r=new djwq.DingWeiWuqi(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),this.wuqiList.push(r)),"op_wq_3_png"==s&&(r=new djwq.GenZhongWuqi(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),this.wuqiList.push(r)),"op_wq_4_png"==s&&(r=new djwq.JianSuWuqi(egret.Point.create(o,a),mokuai.BODY_SHAPE_TYPE.SIMPLE,s,this),this.wuqiList.push(r)),this.suiji_dl(r);var h=Physics.getRelativeDistance(egret.Point.create(this.W,this.H),egret.Point.create(o,a),mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]),_=new p2.Box({width:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE],height:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]});_.collisionGroup=this.collGroup,_.collisionMask=this.collMask,this.addShape(_,[h.x,h.y]),this.moKuaiList[a][o]=r,r.boxShape=_,r instanceof mokuai.DongLiHeXin?this.battle_scene.addChildAt(r,10):this.battle_scene.addChildAt(r,5),this.mokuai_size++,n++}else n++}this.battle_scene.world.addBody(this)},i.prototype.suiji_dl=function(t){var i=suiji.isDiaoLuoMoKuai();t.is_diao_luo=i,i&&(t.diao_luo_type=suiji.suiji_yanse(),t.diao_luo_type==suiji.SJ_YAN_SE.WU_QI&&(t.dl_wq_type=suiji.suiji_wuqi()),t.dl_lv=suiji.suiji_level(t.diao_luo_type))},i.prototype.initColl=function(){this.zhenying==GameConstant.ZHEN_YING.WO_JUN&&(this.collGroup=GameConstant.WO_JUN,this.collMask=GameConstant.DI_JUN|GameConstant.ZHONG_LI|GameConstant.DI_JUN_ZIDAN|GameConstant.DIAO_LUO),this.zhenying==GameConstant.ZHEN_YING.DI_JUN&&(this.collGroup=GameConstant.DI_JUN,this.collMask=GameConstant.WO_JUN|GameConstant.ZHONG_LI|GameConstant.WO_JUN_ZIDAN|GameConstant.DI_JUN),this.zhenying==GameConstant.ZHEN_YING.ZHONG_LI&&(this.collGroup=GameConstant.ZHONG_LI,this.collMask=GameConstant.DI_JUN|GameConstant.ZHONG_LI|GameConstant.WO_JUN|GameConstant.WO_JUN_ZIDAN|GameConstant.DI_JUN_ZIDAN)},i.prototype.initPhPost=function(){var t=Tools.egretTOp2(this.egretWorldPoint);this.position[0]=t.x,this.position[1]=t.y},i.prototype.initList=function(t,i){this.moKuaiList=new Array;for(var e=0;t>e;e++)this.moKuaiList.push(new Array(i));this.wuqiList=new Array,this.removeMoKuai=new Array},i.prototype.updataFenJie=function(){this.fen_jie=new Array;for(var t=0;10>t;t++)this.fen_jie.push([])},i.prototype.updataPos=function(){var t=this.moKuaiList.length,i=this.moKuaiList[0].length;this instanceof shuke.ShuKe&&(this.angle=0);for(var e=0;t>e;e++)for(var n=0;i>n;n++)if(this.moKuaiList[e][n]){var a=this.moKuaiList[e][n].boxShape,o=this.moKuaiList[e][n],s=Math.PI/180*360-this.angle,r=Math.cos(s)*a.position[0]+Math.sin(s)*a.position[1],h=-Math.sin(s)*a.position[0]+Math.cos(s)*a.position[1],_=Tools.p2TOegretPoitn(egret.Point.create(r+this.position[0],h+this.position[1]));o.x=_.x,o.y=_.y,o.markPoint=_,o.rotation=360-180*this.angle/Math.PI}},i.prototype.updataSomeThing=function(){this.updataPos(),this.updataAI(),this.updataZTJ()},i.prototype.updataZTJ=function(){this.ztj&&this.ztj.upStep(egret.getTimer())},i.prototype.updataAI=function(){this.moveAI&&this.moveAI.updata_ai(egret.getTimer()),this.xzAI&&this.xzAI.updata_ai(egret.getTimer()),this.mzAI&&this.mzAI.updata_ai(egret.getTimer())},i.prototype.getMokWorldpos=function(t){var i=Math.PI/180*360-this.angle,e=Math.cos(i)*t.x+Math.sin(i)*t.y,n=-Math.sin(i)*t.x+Math.cos(i)*t.y;return egret.Point.create(e+this.position[0],n+this.position[1])},i.prototype.initPro=function(t){var i=egret.Point.create(t[0].length,t.length);this.initList(t.length,t[0].length);for(var e=0;e<t.length;e++)for(var n=0;n<t[0].length;n++)this.initMokuai(t[e][n],e,n,i);this.battle_scene.world.addBody(this)},i.prototype.initMokuai=function(t,i,e,n){var a;if(3==t){a=new wjwq.ChangDingWuqi(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,1);var o=a;a.setMkLevel(5),this.wuqiList.push(o)}if(2==t&&(a=new zhuangjia.PuTongZhuangJia(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_zj_level_5_png",this)),1==t&&(this.hx=new mokuai.DongLiHeXin(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_hx_hx_png",this),a=this.hx),0!=t){var s=Physics.getRelativeDistance(n,egret.Point.create(e,i),mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]),r=new p2.Box({width:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE],height:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]});r.collisionGroup=this.collGroup,r.collisionMask=this.collMask,this.addShape(r,[s.x,s.y]),this.moKuaiList[i][e]=a,a.boxShape=r,this.battle_scene.addChild(a),this.mokuai_size++}},i.prototype.jia_ce_peng_zhuang_dian=function(t,i){for(var e,n=1e3,a=1e3,o=0;o<this.moKuaiList.length;o++)for(var s=0;s<this.moKuaiList[o].length;s++){var r=this.moKuaiList[o][s];if(r){var h=Math.abs(r.x-t),_=Math.abs(r.y-i);n+a>h+_&&(n=h,a=_,e=r)}}return e},i.prototype.checkCollision=function(t,i,e){var n=this.jia_ce_peng_zhuang_dian(t,i);this.shang_hai(n,e)},i.prototype.shang_hai=function(t,i){t&&(t.coll(i)&&(this.moKuaiList[t.moKuaiPost.y][t.moKuaiPost.x]=null,this.battle_scene.shouShangFeiChuanList.push(this),this.removeMoKuai.push(t),t instanceof mokuai.DongLiHeXin&&(this.hx=null,this.battle_scene.lastFeiJi--),t.moKuaiType==mokuai.MO_KUAI_TYPE.WU_QI&&this.removeWuQi(t),t.jihui_texiao()),t.jiZhong_texiao())},i.prototype.dellMokuai=function(){for(var t=0;t<this.removeMoKuai.length;t++){var i=this.removeMoKuai.pop();this.moKuaiList[i.moKuaiPost.y][i.moKuaiPost.x]=null,this.removeShape(i.boxShape),this.battle_scene.removeChild(i)}},i.prototype.fenJie=function(){for(var t=this.fen_jie.length,i=0;t>i;i++){for(var e=this.fen_jie.pop(),n=(e.length,!1),a=0,o=e;a<o.length;a++){var s=o[a];s&&(n=!0)}if(n){var r=new canhai.CanHai(this,e);this.battle_scene.canHais.push(r)}}},i.prototype.addAI=function(t){this.ais.push(t)},i.prototype.removeWuQi=function(t){var i=this.wuqiList.indexOf(t);this.wuqiList.splice(i,1)},i.prototype.ji_guang_peng_zhuang=function(t,i){},i}(p2.Body);t.FeiChuanBase=e,__reflect(e.prototype,"feichuan.FeiChuanBase")}(feichuan||(feichuan={}));var djwq;!function(t){var i=function(t){function i(i,e,n,a,o){var s=t.call(this,e,n,a,o,i)||this;return s.cd=5e3,s}return __extends(i,t),i.prototype.fashe=function(t,i,e){},i}(wuqi.WuQiBase);t.DJWQBase=i,__reflect(i.prototype,"djwq.DJWQBase")}(djwq||(djwq={}));var zidan;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,{mass:n})||this;return o.wyCD=25,o.wyMark=0,o.is_updata=!1,o.collNumber=1,o.hitNumber=1,o.is_first=!0,o.mark_time=egret.getTimer(),o.sheng_ming_zhou_qi=1e4,o.isAddRem=!1,o.zhenying=e,o.wqt=a,o.scene=i,o.yueShulist=new Array,o.initColl(),o.initZidan(),o}return __extends(i,t),i.prototype.initZidan=function(){var t=new p2.Box({width:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.NANO],height:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.NANO]});this.addShape(t),t.collisionMask=this.collMask,t.collisionGroup=this.collGroup},i.prototype.yue_shu=function(){},i.prototype.initColl=function(){this.zhenying==GameConstant.ZHEN_YING.WO_JUN_ZIDAN&&(this.collGroup=GameConstant.WO_JUN_ZIDAN,this.collMask=GameConstant.DI_JUN|GameConstant.ZHONG_LI),this.zhenying==GameConstant.ZHEN_YING.DI_JUN_ZIDAN&&(this.collGroup=GameConstant.DI_JUN_ZIDAN,this.collMask=GameConstant.WO_JUN|GameConstant.ZHONG_LI),this.zhenying==GameConstant.ZHEN_YING.ZHONG_LI&&(this.collGroup=GameConstant.ZHONG_LI,this.collMask=GameConstant.DI_JUN|GameConstant.ZHONG_LI|GameConstant.WO_JUN|GameConstant.WO_JUN_ZIDAN|GameConstant.DI_JUN_ZIDAN)},i.prototype.texiao=function(){this.dell(this.bitmap)},i.prototype.removeTeXiao=function(){this.addRemove()},i.prototype.addRemove=function(){this.scene.ovzRemoveZiDanBodyList.push(this)},i.prototype.dell=function(t){t&&t.parent&&(egret.Tween.removeTweens(t),this.scene.removeChild(t)),t=null},i.prototype.removeYueShu=function(){if(!(this.yueShulist.length<=0))for(var t=this.yueShulist.length,i=0;t>i;i++){var e=this.yueShulist.pop();this.scene.world.removeConstraint(e)}},i.prototype.updata=function(){},i.prototype.weiyi=function(t){if(!(egret.getTimer()-this.wyMark<this.wyCD&&null!=this.bitmap)){this.wyMark=egret.getTimer();var i=new egret.Bitmap(RES.getRes(t));i.anchorOffsetX=.5*this.bitmap.width,i.anchorOffsetY=.5*this.bitmap.height,i.rotation=360-180*this.angle/Math.PI,i.x=this.bitmap.x,i.y=this.bitmap.y,i.scaleX=.3,i.scaleY=.3,this.scene.addChild(i),i.alpha=.5,egret.Tween.get(i).to({scaleX:.3,scaleY:.3},110).call(this.dell,this,[i])}},i}(p2.Body);t.ZiDanBase=i,__reflect(i.prototype,"zidan.ZiDanBase")}(zidan||(zidan={}));var fjztj;!function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.upStep=function(t){},i}(zhuangtaiji.ZhuangTaiJiBase);t.FjZTJ=i,__reflect(i.prototype,"fjztj.FjZTJ")}(fjztj||(fjztj={}));var ai;!function(t){var i=function(t){function i(i){var e=t.call(this,i)||this;return e.is_u=!0,e.point_index=0,e.wu_cha=1,e}return __extends(i,t),i.prototype.doUpData=function(i){if(this.fc.toPoint){t.prototype.doUpData.call(this,i);var e=egret.Point.distance(this.fc.toPoint,egret.Point.create(this.fc.position[0],this.fc.position[1]));if(e<this.wu_cha)return this.fc.toPoint=null,void(this.fc.ztj.mT=zhuangtaiji.ZT_TYPE.SINGO_MOVE_OVER);this.rx=.5*(this.fc.toPoint.x-this.fc.position[0]),this.ry=.5*(this.fc.toPoint.y-this.fc.position[1]),this.fc.velocity=[this.rx,this.ry]}},i}(t.AiBase);t.SingoMoveToAi=i,__reflect(i.prototype,"ai.SingoMoveToAi")}(ai||(ai={}));var ai;!function(t){var i=function(t){function i(i,e){var n=t.call(this,i)||this;return n.xs=e,n}return __extends(i,t),i.prototype.doUpData=function(i){this.hang_up||(t.prototype.doUpData.call(this,i),this.fc.angularVelocity=this.xs)},i}(t.AiBase);t.XuanZhuanAI=i,__reflect(i.prototype,"ai.XuanZhuanAI")}(ai||(ai={}));var ai;!function(t){var i=function(i){function e(t){var e=i.call(this,t)||this;return e.xs=.5,e.fc.angularDamping=.9,e}return __extends(e,i),e.prototype.doUpData=function(i){if(!this.hang_up&&this.fc.p2_target){var e=Math.atan2(this.fc.p2_target.y-this.fc.position[1],this.fc.p2_target.x-this.fc.position[0])+.5*Math.PI,n=Math.PI+1.57;this.fc.angle>n&&(this.fc.angle=this.fc.angle-2*Math.PI),this.fc.angle<.5*-Math.PI&&(this.fc.angle=n),e>=0&&this.fc.angle>=0&&(Math.abs(e-this.fc.angle)<Math.PI?e<this.fc.angle?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:e<this.fc.angle?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise),0>e&&this.fc.angle>=0&&(Math.abs(e)+this.fc.angle<Math.PI?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise),this.fc.angle<0&&e>=0&&(Math.abs(e)+this.fc.angle<Math.PI?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise),this.fc.angle<0&&0>e&&(this.fc.angle<e?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise),this.xuan_zhuan_fang_xiang==t.ZHUAN_XIANG.Clockwise&&Math.abs(this.fc.angle-e)>.1&&(this.fc.angularVelocity=-this.xs),this.xuan_zhuan_fang_xiang==t.ZHUAN_XIANG.Anti_clockwise&&Math.abs(this.fc.angle-e)>.1&&(this.fc.angularVelocity=this.xs)}},e}(t.AiBase);t.ZhuanXiang=i,__reflect(i.prototype,"ai.ZhuanXiang")}(ai||(ai={}));var ai;!function(t){var i=function(t){function i(i){var e=t.call(this,i)||this;return e.is_get=!0,e.v=1,e}return __extends(i,t),i.prototype.doUpData=function(t){if(this.is_get||this.fc.velocity[0]<.5)return this.target_point=egret.Point.create(this.getRandomX(),this.fc.position[1]),this.target_point.x>this.fc.position[0]?this.fc.velocity=[this.v,0]:this.fc.velocity=[-this.v,0],void(this.is_get=!1);var i=egret.Point.distance(egret.Point.create(this.fc.position[0],this.fc.position[1]),this.target_point);.5>i&&(this.is_get=!0)},i.prototype.getRandomX=function(){var t=12*Math.random()+20;return t},i}(t.AiBase);t.ZuoYouLuanDongAI=i,__reflect(i.prototype,"ai.ZuoYouLuanDongAI")}(ai||(ai={}));var canhai;!function(t){var i=function(t){function i(i,e){var n=t.call(this,i.battle_scene,egret.Point.create(500,500),GameConstant.ZHEN_YING.ZHONG_LI)||this;return n.fc_type=feichuan.FC_TYPE.CANHAI,n.yuntu=e,n.zhuji=i,n.initCanhai(),n}return __extends(i,t),i.prototype.initCanhai=function(){for(var t=100,i=100,e=0,n=0,a=0,o=this.yuntu;a<o.length;a++){var s=o[a];s&&(s.moKuaiPost.x<i&&(i=s.moKuaiPost.x),s.moKuaiPost.y<t&&(t=s.moKuaiPost.y),s.moKuaiPost.x>e&&(e=s.moKuaiPost.x),s.moKuaiPost.y>n&&(n=s.moKuaiPost.y))}for(var r=n-t+1,h=e-i+1,_=new Array,u=0;r>=u;u++){_[u]=new Array;for(var c=0;h>=c;c++)_[u].push(0)}for(var p=0,l=this.yuntu;p<l.length;p++){var s=l[p];_[s.moKuaiPost.y-t][s.moKuaiPost.x-i]=s.mk_level}this.initChanHai(_);var g=this.yuntu[0],f=this.moKuaiList[g.moKuaiPost.y-t][g.moKuaiPost.x-i],m=Math.PI/180*360-this.zhuji.angle,d=Math.cos(m)*(g.boxShape.position[0]-f.boxShape.position[0])+Math.sin(m)*(g.boxShape.position[1]-f.boxShape.position[1]),P=-Math.sin(m)*(g.boxShape.position[0]-f.boxShape.position[0])+Math.cos(m)*(g.boxShape.position[1]-f.boxShape.position[1]);this.position[0]=this.zhuji.position[0]+d,this.position[1]=this.zhuji.position[1]+P,this.angle=this.zhuji.angle},i.prototype.initChanHai=function(t){var i=egret.Point.create(t[0].length,t.length);this.initList(t.length,t[0].length);for(var e=0;e<t.length;e++)for(var n=0;n<t[0].length;n++)this.initMK(t[e][n],e,n,i);this.battle_scene.world.addBody(this)},i.prototype.initMK=function(t,i,e,n){var a;if(1==t&&(a=new zhuangjia.PuTongZhuangJia(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"op_zj_pt_ch_level_1_ch_png",this)),2==t&&(a=new zhuangjia.PuTongZhuangJia(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"op_zj_pt_ch_level_2_ch_png",this)),3==t&&(a=new zhuangjia.PuTongZhuangJia(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"op_zj_pt_ch_level_3_ch_png",this)),4==t&&(a=new zhuangjia.PuTongZhuangJia(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"op_zj_pt_ch_level_4_ch_png",this)),5==t&&(a=new zhuangjia.PuTongZhuangJia(egret.Point.create(e,i),mokuai.BODY_SHAPE_TYPE.SIMPLE,"op_zj_pt_ch_level_5_ch_png",this)),0!=t){var o=Physics.getRelativeDistance(n,egret.Point.create(e,i),mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]),s=new p2.Box({width:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE],height:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]});s.collisionGroup=this.collGroup,s.collisionMask=this.collMask,this.addShape(s,[o.x,o.y]),this.moKuaiList[i][e]=a,a.boxShape=s,this.battle_scene.addChild(a),this.mokuai_size++}},i.prototype.updataSomeThing=function(){t.prototype.updataSomeThing.call(this)},i}(feichuan.FeiChuanBase);t.CanHai=i,__reflect(i.prototype,"canhai.CanHai")
}(canhai||(canhai={}));var GameConstant;!function(t){function i(i){i.updataFenJie();var o=i.moKuaiList;t.mark=0;var s;i.fc_type==feichuan.FC_TYPE.DIJI&&(s=i.hx,s&&(s.mark_number=t.mark)),i.fc_type==feichuan.FC_TYPE.CANHAI&&(s=e(i)),n(o,s,i),a(o,i),i.fc_type==feichuan.FC_TYPE.DIJI&&null==i.hx&&i.battle_scene.removeTheFcInTheGame(i)}function e(i){for(var e=0;e<i.moKuaiList.length;e++)for(var n=0;n<i.moKuaiList[e].length;n++)if(i.moKuaiList[e][n])return i.moKuaiList[e][n].mark_number=t.mark,i.moKuaiList[e][n]}function n(i,e,n){if(e){for(t.hearList=new Array,t.hearList.push(e);t.hearList.length>0;)s(i,t.hearList.shift(),n);for(var a=0;10>a&&o(i,n);a++);}else for(var r=0;r<i.length;r++)for(var h=0;h<i[r].length;h++)i[r][h]&&(i[r][h].mark_number=1)}function a(t,i){for(var e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)if(t[e][n]){if(t[e][n].mark_number>0){t[e][n]instanceof wuqi.WuQiBase&&i.removeWuQi(t[e][n]),t[e][n].is_diao_luo&&i.battle_scene.diao_luo_dao_ju(t[e][n]),i.fen_jie[t[e][n].mark_number].push(t[e][n]),i.removeShape(t[e][n].boxShape),i.battle_scene.removeChild(t[e][n]),t[e][n]=null;continue}t[e][n].mark_number=-1}}function o(i,e){t.mark++,t.hearList=new Array;for(var n=!1,a=0;a<i.length;a++){for(var o=0;o<i[a].length;o++)if(i[a][o]&&-1==i[a][o].mark_number){i[a][o].mark_number=t.mark,t.hearList.push(i[a][o]),n=!0;break}if(n)break}for(;t.hearList.length>0;)s(i,t.hearList.shift(),e);return n}function s(i,e,n){var a,o,s=e.moKuaiPost.x,h=e.moKuaiPost.y;a=h-1,o=s,r(i,t.mark,a,o,n),a=h+1,o=s,r(i,t.mark,a,o,n),a=h,o=s-1,r(i,t.mark,a,o,n),a=h,o=s+1,r(i,t.mark,a,o,n)}function r(i,e,n,a,o){n>=0&&a>=0&&n<i.length&&a<i[0].length&&i[n][a]&&-1==i[n][a].mark_number&&(i[n][a].mark_number=e,t.hearList.push(i[n][a]))}function h(t){for(var i=!1,e=0;e<t.moKuaiList.length;e++)for(var n=0;n<t.moKuaiList[e].length;n++)t.moKuaiList[e][n]&&(i=!0);return i?!0:(t.battle_scene.removeTheFcInTheGame(t),!1)}var _;!function(t){t[t.WO_JUN=0]="WO_JUN",t[t.DI_JUN=1]="DI_JUN",t[t.ZHONG_LI=2]="ZHONG_LI",t[t.WO_JUN_ZIDAN=3]="WO_JUN_ZIDAN",t[t.DI_JUN_ZIDAN=4]="DI_JUN_ZIDAN",t[t.DIAO_LUO=5]="DIAO_LUO"}(_=t.ZHEN_YING||(t.ZHEN_YING={})),t.WO_JUN=Math.pow(2,1),t.DI_JUN=Math.pow(2,2),t.ZHONG_LI=Math.pow(2,3),t.WO_JUN_ZIDAN=Math.pow(2,4),t.DI_JUN_ZIDAN=Math.pow(2,5),t.DIAO_LUO=Math.pow(2,6),t.mark=0,t.diaoluo=i,t.chackMoKuaiNumber=h}(GameConstant||(GameConstant={}));var bean;!function(t){var i=function(){function t(t,i){this.mk=t,this.hitNumb=i}return t}();t.HitBean=i,__reflect(i.prototype,"bean.HitBean")}(bean||(bean={}));var diaoluo;!function(t){var i=function(t){function i(i,e,n,a,o){var s=t.call(this,{mass:1})||this;return s.zhenying=GameConstant.ZHEN_YING.DIAO_LUO,s.collNum=1,s.scene=i,s.dl_type=e,s.lv=n,e==suiji.SJ_YAN_SE.WU_QI&&(s.wq_type=o),s.position[0]=a.x,s.position[1]=a.y,s.initColl(),s.init(),s.bitmap.anchorOffsetX=.5*s.bitmap.width,s.bitmap.anchorOffsetY=.5*s.bitmap.height,s}return __extends(i,t),i.prototype.init=function(){var t=new p2.Box({width:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.NANO],height:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.NANO]});this.addShape(t),t.collisionMask=this.collMask,t.collisionGroup=this.collGroup,this.dl_type==suiji.SJ_YAN_SE.RAN_LIAO&&(1==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op__dl_rl_1_dl_png")),this.name1="op__dl_rl_1_dl_png",this.name2="op_dl_rl_1_s_dl_png"),2==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op__dl_rl_2_dl_png")),this.name1="op__dl_rl_2_dl_png",this.name2="op_dl_rl_2_s_dl_png"),3==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op__dl_rl_3_dl_png")),this.name1="op__dl_rl_3_dl_png",this.name2="op_dl_rl_3_s_dl_png")),this.dl_type==suiji.SJ_YAN_SE.WU_QI&&(this.wq_type==wuqi.WUQI_TYPE.PU_TONG&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_1_png")),this.name1="op_dl_wq_1_png",this.name2="op_dl_wq_1_s_png"),this.wq_type==wuqi.WUQI_TYPE.SAN_DAN&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_2_png")),this.name1="op_dl_wq_2_png",this.name2="op_dl_wq_2_s_png"),this.wq_type==wuqi.WUQI_TYPE.DAO_DAN&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_3_png")),this.name1="op_dl_wq_3_png",this.name2="op_dl_wq_3_s_png"),this.wq_type==wuqi.WUQI_TYPE.SHE_XIAN&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_4_png")),this.name1="op_dl_wq_4_png",this.name2="op_dl_wq_4_s_png"),this.wq_type==wuqi.WUQI_TYPE.DING_XIANG&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_5_png")),this.name1="op_dl_wq_5_png",this.name2="op_dl_wq_5_s_png"),this.wq_type==wuqi.WUQI_TYPE.YU_LEI&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_6_png")),this.name1="op_dl_wq_6_png",this.name2="op_dl_wq_6_s_png"),this.wq_type==wuqi.WUQI_TYPE.LUO_XUAN&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_7_png")),this.name1="op_dl_wq_7_png",this.name2="op_dl_wq_7_s_png"),this.wq_type==wuqi.WUQI_TYPE.CHANG_DING&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_8_png")),this.name1="op_dl_wq_8_png",this.name2="op_dl_wq_8_s_png"),this.wq_type==wuqi.WUQI_TYPE.ZHONG_CHUI&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_wq_9_png")),this.name1="op_dl_wq_9_png",this.name2="op_dl_wq_9_s_png")),this.dl_type==suiji.SJ_YAN_SE.ZHUANG_JIA&&(1==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_zj_level_1_dl_png")),this.name1="op_dl_zj_level_1_dl_png",this.name2="op_dl_zj_level_1_s_dl_png"),2==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_zj_level_2_dl_png")),this.name1="op_dl_zj_level_2_dl_png",this.name2="op_dl_zj_level_2_s_dl_png"),3==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_zj_level_3_dl_png")),this.name1="op_dl_zj_level_3_dl_png",this.name2="op_dl_zj_level_3_s_dl_png"),4==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_zj_level_4_dl_png")),this.name1="op_dl_zj_level_4_dl_png",this.name2="op_dl_zj_level_4_s_dl_png"),5==this.lv&&(this.bitmap=new egret.Bitmap(RES.getRes("op_dl_zj_level_5_dl_png")),this.name1="op_dl_zj_level_5_dl_png",this.name2="op_dl_zj_level_5_s_dl_png")),this.displays=[this.bitmap]},i.prototype.initColl=function(){this.collGroup=GameConstant.DIAO_LUO,this.collMask=GameConstant.WO_JUN},i.prototype.updata=function(){this.velocity=[0,-1]},i.prototype.loop=function(){this.tw=egret.Tween.get(this.bitmap,{loop:!0}),this.tw.to({alpha:.8},300).call(this.upBit,this,[this.name2]).to({alpha:.8},300).call(this.upBit,this,[this.name1])},i.prototype.upBit=function(t){this.bitmap.texture=RES.getRes(t),this.bitmap.anchorOffsetX=.5*this.bitmap.width,this.bitmap.anchorOffsetY=.5*this.bitmap.height},i}(p2.Body);t.DiaoLuo=i,__reflect(i.prototype,"diaoluo.DiaoLuo")}(diaoluo||(diaoluo={}));var Main=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i._distance=new egret.Point,i}return __extends(i,t),i.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadResource()},i.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return e.sent(),[4,RES.loadGroup("testLoad",0,t)];case 2:return e.sent(),[4,this.stage.removeChild(t)];case 3:return e.sent(),this.addTestScene(),[3,5];case 4:return i=e.sent(),console.error(i),[3,5];case 5:return[2]}})})},i.prototype.addTestScene=function(){this.testSen=TestScene.getInstance(),this.stage.addChild(this.testSen),this.testSen.x=-scene.scene_anch_x,this.testSen.y=-scene.scene_anch_y},i}(eui.UILayer);__reflect(Main.prototype,"Main");var feichuan;!function(t){var i=function(i){function e(e,n,a,o){var s=i.call(this,e,n,GameConstant.ZHEN_YING.DI_JUN)||this;return s.fc_type=t.FC_TYPE.DIJI,s.initJson(o),s.initTestFchuan(),s.toPoint=Tools.egretTOp2(a),s}return __extends(e,i),e.prototype.initTestFchuan=function(){this.angularDamping=.6,this.mass=100,this.damping=.5},e}(t.FeiChuanBase);t.XiaoBing=i,__reflect(i.prototype,"feichuan.XiaoBing")}(feichuan||(feichuan={}));var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var zhuangjia;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,n,a)||this;return o.number=3,o}return __extends(i,t),i.prototype.Defense=function(){return this.markNumber--,this.markNumber<=0?!1:!0},i}(t.ZhuangJiaBase);t.PuTongZhuangJia=i,__reflect(i.prototype,"zhuangjia.PuTongZhuangJia")}(zhuangjia||(zhuangjia={}));var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,i,e,n){function a(t){i.call(n,t)}function o(i){i.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),e.call(n))}"undefined"!=typeof generateEUI?egret.callLater(function(){i.call(n,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,a,this,RES.ResourceItem.TYPE_TEXT))},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Guanka=function(){function t(t){this.scene=t,this.init()}return t.prototype.init=function(){this.bos=[[[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"10_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"11_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"12_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"13_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"14_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"2_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"3_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"4_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"5_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"6_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"7_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"8_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"1_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"2_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"3_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"4_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"5_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"6_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"7_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"8_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"1_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"2_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"3_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"4_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"5_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"6_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"7_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"8_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"1_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"2_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"3_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"4_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"5_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"6_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"7_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"8_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"1_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"1_m2_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"1_s_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"2_m_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"9_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"3_m_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"4_m_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"4_s_json"}],[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"5_s_json"}]],[[{nowP:egret.Point.create(1300,800),toP:egret.Point.create(1300,1200),sName:"5_m2_json"}],[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"1_m3_json"}],[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"2_m2_json"}]],[[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"2_m3_json"}],[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"3_m2_json"}]],[[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"3_m3_json"}],[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"4_m2_json"}]],[[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"4_m3_json"}],[{nowP:egret.Point.create(1100,800),toP:egret.Point.create(1100,1200),sName:"5_m2_json"}]]]},t}();__reflect(Guanka.prototype,"Guanka");var mokuai;!function(t){var i=function(i){function e(e,n,a,o){var s=i.call(this,e,n,a,o)||this;return s.moKuaiType=t.MO_KUAI_TYPE.HE_XIN,s}return __extends(e,i),e}(t.MoKuaiBase);t.DongLiHeXin=i,__reflect(i.prototype,"mokuai.DongLiHeXin")}(mokuai||(mokuai={}));var Physics;!function(t){function i(t,i,e){var n,a,o=i.x;n=(o-t.x/2)*e,0>n&&(n+=.5*e),n>0&&(n+=.5*e),0==n&&(n=.5*e),1==t.x&&(n=0),o-t.x/2==-.5&&(n=0);var s=t.y-i.y-1;return a=(s-t.y/2)*e,0>a&&(a+=.5*e),a>0&&(a+=.5*e),0==a&&(a=.5*e),1==t.y&&(a=0),s-t.y/2==-.5&&(a=0),egret.Point.create(n,a)}t.factor=50,t.getRelativeDistance=i}(Physics||(Physics={}));var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,i,e){function n(n){i.call(e,n,t)}if(RES.hasRes(t)){var a=RES.getRes(t);a?n(a):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var shuke;!function(t){var i=function(t){function i(i){var e=t.call(this,i,egret.Point.create(scene.scene_anch_x+320,2100),GameConstant.ZHEN_YING.WO_JUN)||this;return e.fc_type=feichuan.FC_TYPE.SUKE,e.initSuKe(),e}return __extends(i,t),i.prototype.addMoKuai=function(t){if(t){var i,e,n=-1,a=this.jia_ce_peng_zhuang_dian(t.displays[0].x,t.displays[0].y);if(a&&t.dl_type!=suiji.SJ_YAN_SE.RAN_LIAO&&(i=a.moKuaiPost.x,e=a.moKuaiPost.y,Math.abs(a.x-t.bitmap.x)>Math.abs(a.y-t.bitmap.y)?t.bitmap.x>a.x?(i=a.moKuaiPost.x+1,n=4):(i=a.moKuaiPost.x-1,n=3):t.bitmap.y<a.y?(e=a.moKuaiPost.y-1,n=1):(e=a.moKuaiPost.y+1,n=2),!(0>i||0>e||i>=this.W||e>=this.H))){if(this.moKuaiList[e][i]){var o=this.kuosan(i,e);o&&(i=o.x,e=o.y)}var s;if(t.dl_type==suiji.SJ_YAN_SE.ZHUANG_JIA&&(1==t.lv&&(s=new zhuangjia.PuTongZhuangJia(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_zj_level_1_png",this)),2==t.lv&&(s=new zhuangjia.PuTongZhuangJia(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_zj_level_2_png",this)),3==t.lv&&(s=new zhuangjia.PuTongZhuangJia(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_zj_level_3_png",this)),4==t.lv&&(s=new zhuangjia.PuTongZhuangJia(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_zj_level_4_png",this)),5==t.lv&&(s=new zhuangjia.PuTongZhuangJia(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,"us_zj_level_5_png",this))),t.dl_type==suiji.SJ_YAN_SE.WU_QI){t.wq_type==suiji.WQ_TYPE[0]&&(s=new wuqi.PuTongDan(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,wuqi.WUQI_TYPE.PU_TONG,this)),t.wq_type==suiji.WQ_TYPE[1]&&(s=new wjwq.SanDanWuqi(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,t.lv)),t.wq_type==suiji.WQ_TYPE[2]&&(s=new wjwq.DaoDanWuqi(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,t.lv)),t.wq_type==suiji.WQ_TYPE[3]&&(s=new wjwq.JiGuangWuqi(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,t.lv)),t.wq_type==suiji.WQ_TYPE[4]&&(s=new wjwq.PaoTaiWuqi(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,t.lv)),t.wq_type==suiji.WQ_TYPE[5]&&(s=new wjwq.YuLeiWuqi(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,t.lv)),t.wq_type==suiji.WQ_TYPE[6]&&(s=new wjwq.LuoXuanWuqi(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,this,t.lv)),t.wq_type==suiji.WQ_TYPE[7]&&(s=new wuqi.PuTongDan(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,wuqi.WUQI_TYPE.PU_TONG,this)),t.wq_type==suiji.WQ_TYPE[8]&&(s=new wuqi.PuTongDan(egret.Point.create(i,e),mokuai.BODY_SHAPE_TYPE.SIMPLE,wuqi.WUQI_TYPE.PU_TONG,this));var r=s;s.setMkLevel(t.lv),this.wuqiList.push(r)}s.setMkLevel(1);var h=Physics.getRelativeDistance(egret.Point.create(this.W,this.H),egret.Point.create(i,e),mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]),_=new p2.Box({width:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE],height:mokuai.M_SIZE_PH[mokuai.BODY_SHAPE_TYPE.SIMPLE]});_.collisionGroup=this.collGroup,_.collisionMask=this.collMask,this.addShape(_,[h.x,h.y]),this.moKuaiList[e][i]=s,s.boxShape=_,this.battle_scene.addChildAt(s,5),this.mokuai_size++}}},i.prototype.initYunTU=function(){this.yun_tu=[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,1,2,2,2,3,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],this.W=this.yun_tu[0].length,this.H=this.yun_tu.length},i.prototype.initSuKe=function(){this.initYunTU(),this.initPro(this.yun_tu)},i.prototype.updataPos=function(){t.prototype.updataPos.call(this)},i.prototype.kuosan=function(t,i){return this.chick(i-1,t-1)?egret.Point.create(t-1,i-1):this.chick(i-1,t)?egret.Point.create(t,i-1):this.chick(i-1,t+1)?egret.Point.create(t+1,i-1):this.chick(i,t-1)?egret.Point.create(t-1,i):this.chick(i,t+1)?egret.Point.create(t+1,i):this.chick(i+1,t-1)?egret.Point.create(t-1,i+1):this.chick(i+1,t)?egret.Point.create(t,i+1):this.chick(i+1,t+1)?egret.Point.create(t+1,i+1):this.chick(i-2,t-2)?egret.Point.create(t-2,i-2):this.chick(i-2,t-1)?egret.Point.create(t-1,i-2):this.chick(i-2,t)?egret.Point.create(t,i-2):this.chick(i-2,t+1)?egret.Point.create(t+1,i-2):this.chick(i-2,t+2)?egret.Point.create(t+2,i-2):this.chick(i-1,t-2)?egret.Point.create(t-2,i-1):this.chick(i-1,t+2)?egret.Point.create(t+2,i-1):this.chick(i,t-2)?egret.Point.create(t-2,i):this.chick(i,t+2)?egret.Point.create(t+2,i):this.chick(i+1,t-2)?egret.Point.create(t-2,i+1):this.chick(i+1,t+2)?egret.Point.create(t+2,i+1):this.chick(i+2,t-2)?egret.Point.create(t-2,i+2):this.chick(i+2,t-1)?egret.Point.create(t-1,i+2):this.chick(i+2,t)?egret.Point.create(t,i+2):this.chick(i+2,t+1)?egret.Point.create(t+1,i+2):this.chick(i+2,t+2)?egret.Point.create(t+2,i+2):null},i.prototype.chick=function(t,i){return 0>t||0>i||t>=this.W||i>=this.H?!1:!0},i}(feichuan.FeiChuanBase);t.ShuKe=i,__reflect(i.prototype,"shuke.ShuKe")}(shuke||(shuke={}));var suiji;!function(t){function i(){var i=t.GetRandomNum(0,t.HX_QUN_ZHONG_ALL);return t.HXS[t.getQuanZhongKey(i,t.HX_QUN_ZHONG)]}function e(){var i=t.GetRandomNum(0,t.YS_QUN_ZHONG_ALL);return t.YSS[t.getQuanZhongKey(i,t.YS_QUN_ZHONG)]}function n(){var i=t.GetRandomNum(0,t.DIAO_LUO_GAI_LV);return 1==i}function a(i){if(i==t.SJ_YAN_SE.RAN_LIAO){var e=t.GetRandomNum(0,t.RL_LV_QZ_ALL);return t.LVS[r(e,t.RL_LV_QZ)]}var n=t.GetRandomNum(0,t.LV_QUN_ZHONG_ALL);return t.LVS[t.getQuanZhongKey(n,t.LV_QUN_ZHONG)]}function o(){var i=t.GetRandomNum(0,t.WQ_TYPE_QZ_ALL);return t.WQ_TYPE[r(i,t.WQ_TYPE_QZ)]}function s(t,i){var e=i-t,n=Math.random();return t+Math.round(n*e)}function r(t,i){for(var e=0,n=0,a=0,o=i;a<o.length;a++){var s=o[a];if(e+=s,e>t)return n;n++}return 0}var h;!function(t){t[t.HU_DUN=0]="HU_DUN",t[t.ZI_YU=1]="ZI_YU",t[t.JI_SU=2]="JI_SU"}(h=t.SJ_HE_XIN||(t.SJ_HE_XIN={}));var _;!function(t){t[t.WU_QI=0]="WU_QI",t[t.ZHUANG_JIA=1]="ZHUANG_JIA",t[t.RAN_LIAO=2]="RAN_LIAO"}(_=t.SJ_YAN_SE||(t.SJ_YAN_SE={})),t.HXS=[h.HU_DUN,h.ZI_YU,h.JI_SU],t.YSS=[_.WU_QI,_.ZHUANG_JIA,_.RAN_LIAO],t.LVS=[1,2,3,4,5],t.DIAO_LUO_GAI_LV=20,t.HX_QUN_ZHONG=[30,30,30],t.HX_QUN_ZHONG_ALL=90,t.YS_QUN_ZHONG=[40,80,3],t.YS_QUN_ZHONG_ALL=123,t.LV_QUN_ZHONG=[50,30,10,5,100],t.LV_QUN_ZHONG_ALL=195,t.RL_LV_QZ=[50,30,10],t.RL_LV_QZ_ALL=90,t.WQ_TYPE=[wuqi.WUQI_TYPE.PU_TONG,wuqi.WUQI_TYPE.SAN_DAN,wuqi.WUQI_TYPE.DAO_DAN,wuqi.WUQI_TYPE.SHE_XIAN,wuqi.WUQI_TYPE.DING_XIANG,wuqi.WUQI_TYPE.YU_LEI,wuqi.WUQI_TYPE.LUO_XUAN,wuqi.WUQI_TYPE.CHANG_DING,wuqi.WUQI_TYPE.ZHONG_CHUI],t.WQ_TYPE_QZ=[1,1,1,1,1,1,1,1,1],t.WQ_TYPE_QZ_ALL=9,t.suiji_hexin=i,t.suiji_yanse=e,t.isDiaoLuoMoKuai=n,t.suiji_level=a,t.suiji_wuqi=o,t.GetRandomNum=s,t.getQuanZhongKey=r}(suiji||(suiji={}));var suiji;!function(t){var i=function(){function t(){}return t}();t.ShuiJiBean=i,__reflect(i.prototype,"suiji.ShuiJiBean")}(suiji||(suiji={}));var test;!function(t){var i;!function(t){t[t.nll=0]="nll",t[t.hx=1]="hx",t[t.zj=2]="zj"}(i=t.yuntu_type||(t.yuntu_type={}));var e=function(t){function i(i){var e=t.call(this,i,egret.Point.create(1200,1300),GameConstant.ZHEN_YING.DI_JUN)||this;return e.fc_type=feichuan.FC_TYPE.DIJI,e.initJson("6_1_json"),e.initTestFchuan(),e}return __extends(i,t),i.prototype.initTestFchuan=function(){this.mass=100},i}(feichuan.FeiChuanBase);t.TestFeiChuan=e,__reflect(e.prototype,"test.TestFeiChuan")}(test||(test={}));var test;!function(t){var i=function(t){function i(){var i=t.call(this)||this;return i.drawGrid(),i}return __extends(i,t),i.prototype.drawGrid=function(){this.graphics.beginFill(0),this.graphics.drawRect(0,0,scene.battle_sceneW,scene.battle_sceneH),this.graphics.endFill(),this.graphics.lineStyle(.2,16777215);for(var t=0;t<scene.battle_sceneH/100;t++)this.graphics.moveTo(0,100*t),this.graphics.lineTo(scene.battle_sceneW,100*t);this.graphics.endFill(),this.graphics.lineStyle(.2,16777215);for(var t=0;t<scene.battle_sceneW/100;t++)this.graphics.moveTo(100*t,0),this.graphics.lineTo(100*t,scene.battle_sceneH);this.graphics.endFill()},i}(egret.Sprite);t.TestGrid=i,__reflect(i.prototype,"test.TestGrid")}(test||(test={}));var TestScene=function(t){function i(){var i=t.call(this)||this;return i.guanka=new Guanka(i),i.initTest(),i.initGuanka(),i}return __extends(i,t),i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i.prototype.initGuanka=function(){this.nowBo=0,this.nowHeiHe=0,this.allHeiHe=this.guanka.bos[this.nowBo].length},i.prototype.initTest=function(){var t=(egret.Point.create(1200,1200),new test.TestGrid);t.x=0,t.y=0,this.addChild(t);var i=new shuke.ShuKe(this);this.sk=i},i.prototype.upSomeThing=function(){if(t.prototype.upSomeThing.call(this),this.add_hh_fc){this.add_hh_fc=!1;for(var i=0;i<this.guanka.bos[this.nowBo][this.nowHeiHe].length;i++){egret.log("***********飞船名称************:"+this.guanka.bos[this.nowBo][this.nowHeiHe][i].sName);var e=new feichuan.XiaoBing(this,this.guanka.bos[this.nowBo][this.nowHeiHe][i].nowP,this.guanka.bos[this.nowBo][this.nowHeiHe][i].toP,this.guanka.bos[this.nowBo][this.nowHeiHe][i].sName);this.dijis.push(e)}this.lastFeiJi=this.guanka.bos[this.nowBo][this.nowHeiHe].length,this.nowHeiHe++,this.nowHeiHe>=this.guanka.bos[this.nowBo].length&&(this.nowBo++,this.nowHeiHe=0)}this.lastFeiJi<=0&&(this.add_hh_fc=!0)},i.instance=null,i}(scene.SceneBase);__reflect(TestScene.prototype,"TestScene");var texiao;!function(t){var i=function(t){function i(i){return t.call(this,i)||this}return __extends(i,t),i.prototype["goto"]=function(){},i}(t.TeXiaoBase);t.JiZhongTeXiao=i,__reflect(i.prototype,"texiao.JiZhongTeXiao")}(texiao||(texiao={}));var ai;!function(t){var i=function(t){function i(i,e){var n=t.call(this,i)||this;return n.xs=e,n}return __extends(i,t),i.prototype.doUpData=function(t){if(!this.hang_up){var i=egret.Point.distance(egret.Point.create(this.suke.position[0],this.suke.position[1]),egret.Point.create(this.fc.position[0],this.fc.position[1]));if(i<this.xs)return;var e=.1*(this.suke.position[0]-this.fc.position[0]),n=.1*(this.suke.position[1]-this.fc.position[1]);this.fc.velocity=[e,n]}},i}(t.AiBase);t.KeepDistanceAI=i,__reflect(i.prototype,"ai.KeepDistanceAI")}(ai||(ai={}));var LoadingUI=function(t){function i(){var i=t.call(this)||this;return i.createView(),i}return __extends(i,t),i.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},i.prototype.onProgress=function(t,i){this.textField.text="Loading..."+t+"/"+i},i}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var wuqi;!function(t){var i=function(t){function i(i,e,n,a){return t.call(this,i,e,"us_wq_1_png",n,a)||this}return __extends(i,t),i.prototype.fashe=function(i,e,n){t.prototype.fashe.call(this,i,e,n);var a=new zidan.PuTongZiDan(this.fc.battle_scene,GameConstant.ZHEN_YING.WO_JUN_ZIDAN,1e-4),o=Tools.egretTOp2(egret.Point.create(this.x,this.y));a.position[0]=o.x,a.position[1]=o.y;var s=0*Math.cos(this.fc.angle)+Math.sin(this.fc.angle)*this.sudu,r=0*-Math.sin(this.fc.angle)+Math.cos(this.fc.angle)*this.sudu;this.fc.battle_scene.world.addBody(a),this.fc.battle_scene.addChild(a.bitmap),a.velocity=[s,r]},i}(t.WuQiBase);t.PuTongDan=i,__reflect(i.prototype,"wuqi.PuTongDan")}(wuqi||(wuqi={}));var ai;!function(t){var i=function(i){function e(t,e){var n=i.call(this,t)||this;return n.is_xuan_ting=!1,n.xs=e,n}return __extends(e,i),e.prototype.doUpData=function(e){if(!this.hang_up){i.prototype.doUpData.call(this,e);var n=Math.atan2(this.suke.position[1]-this.fc.position[1],this.suke.position[0]-this.fc.position[0])+.5*Math.PI,a=Math.PI+1.57;if(this.fc.angle>a&&(this.fc.angle=this.fc.angle-2*Math.PI),this.fc.angle<.5*-Math.PI&&(this.fc.angle=a),Math.abs(this.fc.angle-n)<.3)return;egret.log("YYYYYYYYYYYYYYY:"+this.fc.angle+"_____"+n+" || "+Math.abs(this.fc.angle-n)),n>=0&&this.fc.angle>=0&&(Math.abs(n-this.fc.angle)<Math.PI?n<this.fc.angle?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:n<this.fc.angle?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise),0>n&&this.fc.angle>=0&&(Math.abs(n)+this.fc.angle<Math.PI?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise),this.fc.angle<0&&n>=0&&(Math.abs(n)+this.fc.angle<Math.PI?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise),this.fc.angle<0&&0>n&&(this.fc.angle<n?this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Anti_clockwise:this.xuan_zhuan_fang_xiang=t.ZHUAN_XIANG.Clockwise),this.is_xuan_ting||(this.xuan_zhuan_fang_xiang==t.ZHUAN_XIANG.Clockwise&&(this.fc.angularVelocity=-this.xs),this.xuan_zhuan_fang_xiang==t.ZHUAN_XIANG.Anti_clockwise&&(this.fc.angularVelocity=this.xs))}},e}(t.AiBase);t.MiaoZhun=i,__reflect(i.prototype,"ai.MiaoZhun")}(ai||(ai={}));var djwq;!function(t){var i=function(t){function i(i,e,n,a){return t.call(this,a,i,e,n,wuqi.WUQI_TYPE.DING_WEI)||this}return __extends(i,t),i.prototype.fashe=function(t,i,e){var n=this.fc.angle,a=Math.sin(n)*this.sudu,o=Math.cos(n)*this.sudu;o=-1*o;var s=egret.Point.create(a,o);this.diu(this.wuqi_type,s,GameConstant.ZHEN_YING.DI_JUN_ZIDAN,n)},i}(t.DJWQBase);t.DingWeiWuqi=i,__reflect(i.prototype,"djwq.DingWeiWuqi")}(djwq||(djwq={}));var ai;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i)||this;return a.is_u=!0,a.point_index=0,a.wu_cha=1,a.points=e,a.is_loop=n,a.fc.p2_target=e[0],a}return __extends(i,t),i.prototype.doUpData=function(i){if(!this.hang_up){t.prototype.doUpData.call(this,i);var e=egret.Point.distance(egret.Point.create(this.points[this.point_index].x,this.points[this.point_index].y),egret.Point.create(this.fc.position[0],this.fc.position[1]));if(e<this.wu_cha)return this.is_u=!0,this.point_index++,this.point_index>=this.points.length?this.is_loop?(this.point_index=0,void(this.fc.p2_target=this.points[this.point_index])):(this.hang_up=!0,void(this.fc.p2_target=null)):void(this.fc.p2_target=this.points[this.point_index]);if(this.is_u){Math.atan2(this.suke.position[1]-this.fc.position[1],this.suke.position[0]-this.fc.position[0]);this.rx=.1*(this.points[this.point_index].x-this.fc.position[0]),this.ry=.1*(this.points[this.point_index].y-this.fc.position[1]),this.is_u=!1}this.fc.velocity=[this.rx,this.ry]}},i}(t.AiBase);t.MoveToAi=i,__reflect(i.prototype,"ai.MoveToAi")}(ai||(ai={}));var djwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,a,i,e,n,wuqi.WUQI_TYPE.GEN_ZHONG)||this;return o.small_cd=2e3,o.mark_small_time=0,o.shu_liang=0,o.shu_liang_mark=5,o.shu_liang_mark=5,o.shu_liang=o.shu_liang_mark,o.sudu=1.2,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){if(e-this.mark_small_time>this.small_cd)if(this.shu_liang>0){var n=this.fc.angle,a=egret.Point.create(0,this.sudu);this.diu(this.wuqi_type,a,GameConstant.ZHEN_YING.DI_JUN_ZIDAN,n),this.shu_liang--}else this.mark_small_time=e+this.small_cd,this.shu_liang=this.shu_liang_mark},i}(t.DJWQBase);t.GenZhongWuqi=i,__reflect(i.prototype,"djwq.GenZhongWuqi")}(djwq||(djwq={}));var djwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,a,i,e,n,wuqi.WUQI_TYPE.JIAN_SU)||this;return o.sudu=25,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){var n=this.fc.angle,a=Math.sin(n)*this.sudu,o=Math.cos(n)*this.sudu;o=-1*o;var s=(-(this.fc.position[0]-i.position[0]),-(this.fc.position[1]-i.position[1]),egret.Point.create(a,o));this.diu(this.wuqi_type,s,GameConstant.ZHEN_YING.DI_JUN_ZIDAN,n)},i}(t.DJWQBase);t.JianSuWuqi=i,__reflect(i.prototype,"djwq.JianSuWuqi")}(djwq||(djwq={}));var djwq;!function(t){var i;!function(t){t[t.WU=0]="WU",t[t.ZHAO=1]="ZHAO",t[t.GONG=2]="GONG",t[t.TIAO_ZHENG=3]="TIAO_ZHENG"}(i||(i={}));var e=function(t){function e(e,n,a,o){var s=t.call(this,o,e,n,a,wuqi.WUQI_TYPE.JI_GUANG)||this;return s.kuan=10,s.G_kuan=4,s.sudu=25,s.zt=i.WU,s}return __extends(e,t),e.prototype.fashe=function(t,e,n){if(this.zt!=i.TIAO_ZHENG){if(this.zt==i.WU){var a=new egret.Shape;
a.graphics.lineStyle(this.kuan,16776960),a.graphics.moveTo(this.x,this.y),a.graphics.lineTo(this.x,this.y+1e3),a.graphics.endFill(),a.alpha=.5,this.fc.battle_scene.addChild(a);var o=this.fc;egret.Tween.get(a).to({alpha:.1},600).call(this.rmJG_zhao,this,[o,a]).call(this.t,this,[i.ZHAO]),this.zt=i.TIAO_ZHENG,this.fc.battle_scene.sk.ji_guang_peng_zhuang(this.x,this.y)}if(this.zt==i.ZHAO){var a=new egret.Shape;a.graphics.lineStyle(this.G_kuan,16776960),a.graphics.moveTo(this.x,this.y),a.graphics.lineTo(this.x,this.y+1e3),a.graphics.endFill(),this.fc.battle_scene.addChild(a);var o=this.fc;a.alpha=.7,egret.Tween.get(a).to({alpha:.9},400).call(this.rmJG_gong,this,[o,a]).wait(2e3).call(this.t,this,[i.WU]),this.zt=i.TIAO_ZHENG}}},e.prototype.rmJG_zhao=function(t,i){t.battle_scene.removeChild(i)},e.prototype.rmJG_gong=function(t,i){t.battle_scene.removeChild(i)},e.prototype.t=function(t){this.zt=t},e}(t.DJWQBase);t.JiGuangWuqi=e,__reflect(e.prototype,"djwq.JiGuangWuqi")}(djwq||(djwq={}));var djwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,a,i,e,n,wuqi.WUQI_TYPE.KAI_HUA)||this;return o.small_cd=2e3,o.mark_small_time=0,o.shu_liang=0,o.shu_liang_mark=5,o.cd=500,o.shu_liang_mark=5,o.shu_liang=o.shu_liang_mark,o.sudu=1.2,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){if(e-this.mark_small_time>this.small_cd)if(this.shu_liang>0){var n=this.fc.angle,a=egret.Point.create(0,this.sudu);this.diu(this.wuqi_type,a,GameConstant.ZHEN_YING.DI_JUN_ZIDAN,n),this.shu_liang--}else this.mark_small_time=e+this.small_cd,this.shu_liang=this.shu_liang_mark},i}(t.DJWQBase);t.KaiHuaWuqi=i,__reflect(i.prototype,"djwq.KaiHuaWuqi")}(djwq||(djwq={}));var djwq;!function(t){var i=function(t){function i(i,e,n,a){return t.call(this,a,i,e,n,wuqi.WUQI_TYPE.ZHI_SHE)||this}return __extends(i,t),i.prototype.fashe=function(t,i,e){var n=Math.atan2(i.position[1]-this.fc.position[1],i.position[0]-this.fc.position[0])+.5*Math.PI,a=Math.sin(n)*this.sudu,o=Math.cos(n)*this.sudu;i.position[1]<this.fc.position[1]&&(o=-1*o);var s=(-(this.fc.position[0]-i.position[0]),-(this.fc.position[1]-i.position[1]),egret.Point.create(a,o));this.diu(this.wuqi_type,s,GameConstant.ZHEN_YING.DI_JUN_ZIDAN,n)},i}(t.DJWQBase);t.ZhiSheWuQi=i,__reflect(i.prototype,"djwq.ZhiSheWuQi")}(djwq||(djwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_8_png",wuqi.WUQI_TYPE.CHANG_DING,n)||this;return o.level=a,o.cd=2e3,o.sudu=1,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){this.diu(this.wuqi_type,egret.Point.create(0,this.sudu),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.fc.angle)},i}(wuqi.WuQiBase);t.ChangDingWuqi=i,__reflect(i.prototype,"wjwq.ChangDingWuqi")}(wjwq||(wjwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_3_png",wuqi.WUQI_TYPE.DAO_DAN,n)||this;return o.small_cd=2e3,o.mark_small_time=0,o.shu_liang=0,o.shu_liang_mark=5,o.level=a,o.shu_liang_mark=a,o.cd=150,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){if(e-this.mark_small_time>this.small_cd)if(this.shu_liang>0){var n=this.fc.angle,a=egret.Point.create(0,this.sudu);this.mark_tiaget()&&this.diu(this.wuqi_type,a,GameConstant.ZHEN_YING.WO_JUN_ZIDAN,n),this.shu_liang--}else this.mark_small_time=e+this.small_cd,this.shu_liang=this.shu_liang_mark},i.prototype.mark_tiaget=function(){for(var t,i=-1,e=0,n=this.fc.battle_scene.dijis;e<n.length;e++){var a=n[e];if(t){var o=egret.Point.distance(egret.Point.create(a.hx.x,a.hx.y),egret.Point.create(this.fc.hx.x,this.fc.hx.y));i>o&&(t=a)}else t=a,a.hx&&(i=egret.Point.distance(egret.Point.create(a.hx.x,a.hx.y),egret.Point.create(this.fc.hx.x,this.fc.hx.y)))}return t?(this.tiaget_fc=t,!0):!1},i}(wuqi.WuQiBase);t.DaoDanWuqi=i,__reflect(i.prototype,"wjwq.DaoDanWuqi")}(wjwq||(wjwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_4_png",wuqi.WUQI_TYPE.DAO_DAN,n)||this;return o.result=new p2.RaycastResult,o.rayClosest=new p2.Ray({mode:p2.Ray.CLOSEST}),o.hitPoint=p2.vec2.create(),o.level=a,o.cd=2e3,o.rayClosest.collisionGroup=GameConstant.WO_JUN_ZIDAN,o.rayClosest.collisionMask=GameConstant.DI_JUN|GameConstant.ZHONG_LI,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){var n=Tools.egretTOp2(egret.Point.create(this.x,this.y));if(this.rayClosest.from=[n.x,n.y],this.rayClosest.to=[n.x,80],this.rayClosest.update(),this.result.reset(),this.fc.battle_scene.world.raycast(this.result,this.rayClosest),this.result.getHitPoint(this.hitPoint,this.rayClosest),this.result.hasHit){var a=this.result.body,o=Tools.p2TOegretPoitn(egret.Point.create(this.hitPoint[0],this.hitPoint[1]));a?a.checkCollision(o.x,o.y,1):o.y*=-1;var s=new egret.Shape;s.graphics.lineStyle(10,16776960),s.graphics.moveTo(this.x,this.y),s.graphics.lineTo(o.x,o.y),s.graphics.endFill(),s.alpha=.5,this.fc.battle_scene.addChild(s);this.fc;egret.Tween.get(s).to({alpha:.1},600).call(this.removeXin,this,[s])}},i.prototype.removeXin=function(t){t.parent&&this.fc.battle_scene.removeChild(t)},i.prototype.jianse=function(){},i}(wuqi.WuQiBase);t.JiGuangWuqi=i,__reflect(i.prototype,"wjwq.JiGuangWuqi")}(wjwq||(wjwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_7_png",wuqi.WUQI_TYPE.LUO_XUAN,n)||this;return o.level=a,o.cd=5e3,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){this.diu(this.wuqi_type,egret.Point.create(0,0),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,0)},i}(wuqi.WuQiBase);t.LuoXuanWuqi=i,__reflect(i.prototype,"wjwq.LuoXuanWuqi")}(wjwq||(wjwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_5_png",wuqi.WUQI_TYPE.DING_XIANG,n)||this;return o.small_cd=1e3,o.mark_small_time=0,o.shu_liang=0,o.shu_liang_mark=5,o.level=a,o.shu_liang_mark=a,o.cd=50,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){if(e-this.mark_small_time>this.small_cd)if(this.shu_liang>0){var n=this.mark_tiaget();if(n){var a=this.getAngel(n),o=this.getLiliang(n,a);this.diu(this.wuqi_type,o,GameConstant.ZHEN_YING.WO_JUN_ZIDAN,a)}this.shu_liang--}else this.mark_small_time=e+this.small_cd,this.shu_liang=this.shu_liang_mark},i.prototype.getAngel=function(t){return Math.atan2(t.position[1]-this.fc.position[1],t.position[0]-this.fc.position[0])+.5*Math.PI},i.prototype.mark_tiaget=function(){for(var t,i=-1,e=0,n=this.fc.battle_scene.dijis;e<n.length;e++){var a=n[e];if(t){var o=egret.Point.distance(egret.Point.create(a.hx.x,a.hx.y),egret.Point.create(this.fc.hx.x,this.fc.hx.y));i>o&&(t=a)}else t=a,a.hx&&(i=egret.Point.distance(egret.Point.create(a.hx.x,a.hx.y),egret.Point.create(this.fc.hx.x,this.fc.hx.y)))}return t?t:null},i.prototype.getLiliang=function(t,i){if(t){var e=Math.sin(i)*this.sudu,n=Math.cos(i)*this.sudu;n*=-1;var a=egret.Point.create(e,n);return a}return null},i}(wuqi.WuQiBase);t.PaoTaiWuqi=i,__reflect(i.prototype,"wjwq.PaoTaiWuqi")}(wjwq||(wjwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_2_png",wuqi.WUQI_TYPE.SAN_DAN,n)||this;return o.A0=0*Math.PI/180,o.A5=5*Math.PI/180,o.A10=10*Math.PI/180,o.A15=15*Math.PI/180,o.FA5=-5*Math.PI/180,o.FA10=-10*Math.PI/180,o.FA15=-15*Math.PI/180,o.level=a,o.cd=2e3,o}return __extends(i,t),i.prototype.fashe=function(t,i,e){this.level>=1&&(this.diu(this.wuqi_type,this.getLiliang(this.A5),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.A5),this.diu(this.wuqi_type,this.getLiliang(this.FA5),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.FA5)),this.level>=3&&(this.diu(this.wuqi_type,this.getLiliang(this.A10),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.A10),this.diu(this.wuqi_type,this.getLiliang(this.FA10),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.FA10)),this.level>=5&&(this.diu(this.wuqi_type,this.getLiliang(this.A0),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.A0),this.diu(this.wuqi_type,this.getLiliang(this.A15),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.A15),this.diu(this.wuqi_type,this.getLiliang(this.FA15),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,this.FA15))},i.prototype.getLiliang=function(t){return egret.Point.create(Math.sin(t)*this.sudu,Math.cos(t)*this.sudu)},i}(wuqi.WuQiBase);t.SanDanWuqi=i,__reflect(i.prototype,"wjwq.SanDanWuqi")}(wjwq||(wjwq={}));var wjwq;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,"us_wq_6_png",wuqi.WUQI_TYPE.YU_LEI,n)||this;return o.level=a,o.cd=1e3,1==a&&(o.cd=3e3),2==a&&(o.cd=2500),3==a&&(o.cd=2e3),4==a&&(o.cd=1500),1==a&&(o.cd=1e3),o}return __extends(i,t),i.prototype.fashe=function(t,i,e){this.diu(this.wuqi_type,egret.Point.create(0,0),GameConstant.ZHEN_YING.WO_JUN_ZIDAN,0)},i}(wuqi.WuQiBase);t.YuLeiWuqi=i,__reflect(i.prototype,"wjwq.YuLeiWuqi")}(wjwq||(wjwq={}));var ai;!function(t){var i;!function(t){t[t.x=0]="x",t[t.y=1]="y",t[t.all=2]="all"}(i=t.RANDOM_POINT||(t.RANDOM_POINT={}));var e=function(t){function e(i,e,n){var a=t.call(this,i)||this;return a.is_u=!0,a.d_limit=n,a.random_type=e,a.r_point=a.random_p(),a}return __extends(e,t),e.prototype.doUpData=function(t){var i=egret.Point.distance(egret.Point.create(this.r_point.x,this.r_point.y),egret.Point.create(this.fc.position[0],this.fc.position[1]));if(.3>i&&(this.r_point=this.random_p(),this.is_u=!0),this.is_u){Math.atan2(this.suke.position[1]-this.fc.position[1],this.suke.position[0]-this.fc.position[0]);this.rx=.1*(this.r_point.x-this.fc.position[0]),this.ry=.1*(this.r_point.y-this.fc.position[1]),this.is_u=!1}this.fc.velocity=[this.rx,this.ry]},e.prototype.random_p=function(){var t=Math.random()*this.d_limit*2-this.d_limit,e=Math.random()*this.d_limit*2-this.d_limit;return this.random_type==i.x?egret.Point.create(this.fc.position[0]+t,this.fc.position[1]):this.random_type==i.y?egret.Point.create(this.fc.position[0],this.fc.position[1]+e):this.random_type==i.all?egret.Point.create(this.fc.position[0]+t,this.fc.position[1]+e):null},e}(t.AiBase);t.RandomPointAi=e,__reflect(e.prototype,"ai.RandomPointAi")}(ai||(ai={}));var duixing;!function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i}(zhuangtaiji.ZhuangTaiJiBase);t.DuiXingBase=i,__reflect(i.prototype,"duixing.DuiXingBase")}(duixing||(duixing={}));var ai;!function(t){var i=function(t){function i(i){return t.call(this,i)||this}return __extends(i,t),i.prototype.doUpData=function(i){if(!this.hang_up){t.prototype.doUpData.call(this,i);var e=Math.atan2(this.suke.position[1]-this.fc.position[1],this.suke.position[0]-this.fc.position[0])+.5*Math.PI;this.fc.angle=e}},i}(t.AiBase);t.ShiShiMiaoZhunAi=i,__reflect(i.prototype,"ai.ShiShiMiaoZhunAi")}(ai||(ai={}));var fjztj;!function(t){var i=function(t){function i(i){var e=t.call(this)||this;return e.fc=i,e.mT=zhuangtaiji.ZT_TYPE.SINGO_MOVE_ING,e.xzT=zhuangtaiji.ZT_TYPE.NULL_T,e.mzT=zhuangtaiji.ZT_TYPE.NULL_T,e}return __extends(i,t),i.prototype.upStep=function(i){t.prototype.upStep.call(this,i),this.mT==zhuangtaiji.ZT_TYPE.SINGO_MOVE_ING&&(this.fc.moveAI||(this.fc.moveAI=new ai.SingoMoveToAi(this.fc))),this.mT==zhuangtaiji.ZT_TYPE.SINGO_MOVE_OVER&&(this.fc.moveAI&&this.fc.moveAI instanceof ai.ZuoYouLuanDongAI||(this.fc.moveAI=new ai.XuanZhuanAI(this.fc,.05)))},i}(t.FjZTJ);t.XBZhuangtaiji=i,__reflect(i.prototype,"fjztj.XBZhuangtaiji")}(fjztj||(fjztj={}));var pici;!function(t){var i=function(t){function i(){return t.call(this)||this}return __extends(i,t),i}(zhuangtaiji.ZhuangTaiJiBase);t.PiCiBase=i,__reflect(i.prototype,"pici.PiCiBase")}(pici||(pici={}));var zidan;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,n,wuqi.WUQI_TYPE.DAO_DAN)||this;return o.jsNumb=3,o.initPT(),o.bit_name="us_zd_8_png",a>=3&&(o.jsNumb=4),5==a&&(o.jsNumb=5),o.is_updata=!0,o}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_8_png")),this.damping=0,this.bitmap.anchorOffsetX=.5*this.bitmap.width,this.bitmap.anchorOffsetY=.5*this.bitmap.height,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.chuan_jia=function(t,i){if(t&&i){var e=t.moKuaiPost.x,n=t.moKuaiPost.y;t.rotation>-45&&t.rotation<45&&(this.loopJs(e,n,!1,!1,i),egret.log("正正正正正正正正正正正正正正正正正正正")),t.rotation<-45&&t.rotation>-135&&(this.loopJs(e,n,!0,!0,i),egret.log("左左左左左左左左左左左左左左左左左左")),t.rotation>45&&t.rotation<135&&(this.loopJs(e,n,!0,!1,i),egret.log("右右右右右右右右右右右右右右右右右右")),(t.rotation<-135||t.rotation>135)&&(this.loopJs(e,n,!1,!0,i),egret.log("后后后后后后后后后后后后后后后后后后后"))}},i.prototype.loopJs=function(t,i,e,n,a){for(var o=1;o<=this.jsNumb;o++)e&&(n?this.chickThePost(t+o,i,a):this.chickThePost(t-o,i,a)),e||(n?this.chickThePost(t,i+o,a):this.chickThePost(t,i-o,a))},i.prototype.chickThePost=function(t,i,e){0>t||0>i||t>=e.moKuaiList[0].length||i>=e.moKuaiList.length||e.shang_hai(e.moKuaiList[i][t],this.hitNumber)},i.prototype.texiao=function(){this.bitmap.scaleX=.8,this.bitmap.scaleY=.8,this.bitmap.alpha=.8,egret.Tween.get(this.bitmap).to({alpha:.3},300).call(t.prototype.dell,this,[this.bitmap])},i.prototype.updata=function(){t.prototype.updata.call(this),this.force=[0,5e-4]},i}(t.ZiDanBase);t.ChangDingZiDan=i,__reflect(i.prototype,"zidan.ChangDingZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,n,wuqi.WUQI_TYPE.DAO_DAN)||this;return o.gz_time=1e4,o.sudu=5,o.qi_dong=300,o.initPT(),o.is_updata=!0,o.damping=0,o.fc=a,o.bit_name="us_zd_3_png",o.sudu=8,o}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_3_png")),this.damping=0,this.bitmap.anchorOffsetX=.5*this.bitmap.width,this.bitmap.anchorOffsetY=.5*this.bitmap.height,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){if(t.prototype.updata.call(this),egret.getTimer()-this.mark_time>this.gz_time)return void(this.is_updata=!1);if(this.fc){if(egret.getTimer()-this.mark_time<this.qi_dong)return this.velocity=[0,3],void t.prototype.weiyi.call(this,this.bit_name);var i=Math.atan2(this.fc.position[1]-this.position[1],this.fc.position[0]-this.position[0])+.5*Math.PI,e=Math.sin(i)*this.sudu,n=Math.cos(i)*this.sudu;n=-1*n,this.angle=i,this.velocity=[e,n],t.prototype.weiyi.call(this,this.bit_name)}},i.prototype.texiao=function(){this.bitmap.scaleX=.8,this.bitmap.scaleY=.8,this.bitmap.alpha=.8,egret.Tween.get(this.bitmap).to({alpha:.3},300).call(t.prototype.dell,this,[this.bitmap])},i}(t.ZiDanBase);t.DaoDanZiDan=i,__reflect(i.prototype,"zidan.DaoDanZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.bit_name="op_wq_2_png",a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("op_wq_2_png")),this.damping=0,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this)},i}(t.ZiDanBase);t.DingWeiZidan=i,__reflect(i.prototype,"zidan.DingWeiZidan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.bit_name="us_zd_5_png",a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_5_png")),this.damping=0,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this)},i}(t.ZiDanBase);t.DingXiangZiDan=i,__reflect(i.prototype,"zidan.DingXiangZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n,a){var o=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return o.gz_time=1e4,o.sudu=2,o.initPT(),o.is_updata=!0,o.damping=0,o.suke=a,o.bit_name="op_wq_3_png",o}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("op_wq_3_png")),this.damping=0,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){if(t.prototype.updata.call(this),egret.getTimer()-this.mark_time>this.gz_time)return void(this.is_updata=!1);var i=Math.atan2(this.suke.position[1]-this.position[1],this.suke.position[0]-this.position[0])+.5*Math.PI,e=Math.sin(i)*this.sudu,n=Math.cos(i)*this.sudu;n=-1*n,this.angle=i,this.velocity=[e,n]},i}(t.ZiDanBase);t.GenZongZiDan=i,__reflect(i.prototype,"zidan.GenZongZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.bit_name="op_wq_4_png",a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("op_wq_4_png")),this.damping=.8,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this)},i}(t.ZiDanBase);t.JianSuZiDan=i,__reflect(i.prototype,"zidan.JianSuZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.is_updata=!0,a.bit_name="1-5_png",a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("1-5_png")),this.damping=0,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this),this.force=[0,-1e-4]},i}(t.ZiDanBase);t.KaiHuaZiDan=i,__reflect(i.prototype,"zidan.KaiHuaZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.YU_LEI)||this;return a.sudu=5,a.collNumber=1,a.bit_name="us_zd_7_png",a.is_updata=!0,a.sheng_ming_zhou_qi=1e4,a.initPT(),a.sheng_ming_zhou_qi=6e4,a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_7_png")),this.bitmap.anchorOffsetX=.5*this.bitmap.width,this.bitmap.anchorOffsetY=.5*this.bitmap.height,this.displays=[this.bitmap],this.angularDamping=0},i.prototype.yue_shu=function(){var t=new p2.DistanceConstraint(this.scene.sk,this);this.scene.world.addConstraint(t),t.upperLimitEnabled=!0,t.lowerLimitEnabled=!0,t.upperLimit=3,t.lowerLimit=3,this.yueShulist.push(t)},i.prototype.updata=function(){t.prototype.updata.call(this);var i=Math.atan2(this.scene.sk.position[1]-this.position[1],this.scene.sk.position[0]-this.position[0])+.5*Math.PI-90*Math.PI/180,e=Math.sin(i)*this.sudu,n=Math.cos(i)*this.sudu;n=-1*n,this.angle=i,this.velocity=[e,n]},i}(t.ZiDanBase);t.LuoXuanZiDan=i,__reflect(i.prototype,"zidan.LuoXuanZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.collNumber=1,a.bit_name="us_zd_1_png",a.bitmap.anchorOffsetX=.5*a.bitmap.width,a.bitmap.anchorOffsetY=.5*a.bitmap.height,a.bitmap.scaleX=.5,a.bitmap.scaleY=.5,a.is_updata=!0,a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_1_png")),this.damping=0,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this),t.prototype.weiyi.call(this,this.bit_name)},i.prototype.texiao=function(){this.bitmap.scaleX=.8,this.bitmap.scaleY=.8,this.bitmap.alpha=.8,egret.Tween.get(this.bitmap).to({alpha:.3},300).call(t.prototype.dell,this,[this.bitmap])},i}(t.ZiDanBase);t.PuTongZiDan=i,__reflect(i.prototype,"zidan.PuTongZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.bit_name="us_zd_2_png",a.is_updata=!0,a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_2_png")),this.damping=0,this.bitmap.anchorOffsetX=.5*this.bitmap.width,this.bitmap.anchorOffsetY=.5*this.bitmap.height,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this),t.prototype.weiyi.call(this,this.bit_name)},i.prototype.texiao=function(){this.bitmap.scaleX=.8,this.bitmap.scaleY=.8,this.bitmap.alpha=.8,egret.Tween.get(this.bitmap).to({alpha:.3},300).call(t.prototype.dell,this,[this.bitmap])},i}(t.ZiDanBase);t.SanDanZiDan=i,__reflect(i.prototype,"zidan.SanDanZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.YU_LEI)||this;return a.collNumber=1,a.bit_name="us_zd_6_png",a.is_updata=!0,a.sheng_ming_zhou_qi=1e4,a.initPT(),a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("us_zd_6_png")),this.bitmap.anchorOffsetX=.5*this.bitmap.width,this.bitmap.anchorOffsetY=.5*this.bitmap.height,this.damping=0,this.displays=[this.bitmap],this.angularDamping=0,this.damping=0,this.loop()},i.prototype.updata=function(){t.prototype.updata.call(this),this.velocity=[0,.2],this.angularVelocity=5},i.prototype.loop=function(){var t=egret.Tween.get(this.bitmap,{loop:!0});t.to({scaleX:1.6,scaleY:2,alpha:1.6},100).to({alpha:1,scaleX:1,scaleY:1},150)},i.prototype.removeTeXiao=function(){egret.Tween.removeTweens(this.bitmap);var t=egret.Tween.get(this.bitmap);t.to({scaleX:3,scaleY:3,alpha:.3},800).call(this.addRemove,this)},i}(t.ZiDanBase);t.YuLeiZiDan=i,__reflect(i.prototype,"zidan.YuLeiZiDan")}(zidan||(zidan={}));var zidan;!function(t){var i=function(t){function i(i,e,n){var a=t.call(this,i,e,n,wuqi.WUQI_TYPE.PU_TONG)||this;return a.initPT(),a.bit_name="op_wq_1_png",a}return __extends(i,t),i.prototype.initPT=function(){this.bitmap=new egret.Bitmap(RES.getRes("op_wq_1_png")),this.damping=0,this.bitmap.scaleX=.5,this.bitmap.scaleY=.5,this.displays=[this.bitmap]},i.prototype.updata=function(){t.prototype.updata.call(this)},i}(t.ZiDanBase);t.ZhiSheZhiDan=i,__reflect(i.prototype,"zidan.ZhiSheZhiDan")}(zidan||(zidan={}));var Tools;!function(t){function i(t){return egret.Point.create(t.x*Physics.factor,scene.battle_sceneH-t.y*Physics.factor)}function e(t){return egret.Point.create(t.x/Physics.factor,(scene.battle_sceneH-t.y)/Physics.factor)}function n(t,i,e){var n,a,o=1;return 0>t&&(n=-1*e),t>0&&(n=e),0==t&&(t=.001),0==i&&(i=.001),0>i&&(a=-1*e),i>0&&(a=e),Math.abs(t)>Math.abs(i)?(o=Math.abs(i)/Math.abs(t),egret.Point.create(n,a*o)):Math.abs(i)>Math.abs(t)?(o=Math.abs(t)/Math.abs(i),egret.Point.create(n*o,a)):Math.abs(i)==Math.abs(t)?egret.Point.create(n,a):void 0}function a(t,i){var e=100*t+50,n=100*i+50;return egret.Point.create(e/Physics.factor,(scene.battle_sceneH-n)/Physics.factor)}function o(t,i){return egret.Point.create(100*t+50,100*i+50)}t.p2TOegretPoitn=i,t.egretTOp2=e,t.bilv=n,t.gridTop2=a,t.gridToEgret=o}(Tools||(Tools={}));